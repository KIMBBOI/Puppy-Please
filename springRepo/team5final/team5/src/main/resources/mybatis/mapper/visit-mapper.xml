<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="VisitMapper">

	<!--방문예약 목록 조회 -->
	<select id="list" resultType="com.kh.app.visit.vo.VisitVo">
		SELECT
			VISIT_NO
			,RESERVATION_DATE
		FROM VISIT_RESERVATION
		WHERE "지나지 않은 날"
		ORDER BY "빠른 날짜 순서"
	</select>
	
	<!--방문예약 상세 조회 -->
	<select id="detail" resultType="com.kh.app.visit.vo.VisitVo">
		SELECT
			VISIT_NO
			,MEMBER_NO
			,RESERVATION_DATE
			,SUMMIT_DATE
		FROM VISIT_RESERVATION
		WHERE VISIT_NO = #{visitNo}
	</select>
	
	<!--방문예약 작성 -->
	<insert id="insert">
		INSERT INTO VISIT_RESERVATION
		(
			VISIT_NO
			,MEMBER_NO
			,RESERVATION_DATE
			,SUMMIT_DATE
		) 
		VALUES
		(
			SEQ_VISIT_RESERVATION_NO.NEXTVAL 
			,#{memberNo}
			,#{reservationDate}
			,#{summitDate}
		)
	</insert>
	
	<!--방문예약 수정 -->
	<update id="edit">
		UPDATE VISIT_RESERVATION
		    SET
		        RESERVATION_DATE = #{reservationDate}
		        ,SUMMIT_DATE = #{summitDate}
		    WHERE
		        VISIT_NO = #{visitNo}
	</update>
	
	<!--방문예약 삭제 -->
	<update id="delete">
		UPDATE VISIT_RESERVATION
	    SET
	        DEL_YN = 'Y'
	    WHERE REPORT_NO = #{reportNo}
	</update>
	
</mapper>