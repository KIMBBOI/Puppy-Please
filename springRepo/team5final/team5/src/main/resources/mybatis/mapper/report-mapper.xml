<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ReportMapper">

	<!--게시글 목록 조회 -->
	<select id="list" resultType="com.kh.app.report.vo.ReportVo">
		SELECT
			REPORT_NO
			,MEMBER_NO
			,IMAGE_NO
			,TITLE
			,CONTENT
			,ENROLL_DATE
			,MODIFY_DATE
			,DEL_YN
		FROM 
			REPORT_BULLETIN_BOARD
		WHERE 
			DEL_YN = 'N'
		ORDER BY 
			REPORT_NO DESC
	</select>
	
	<!--게시글 상세 조회 -->
	<select id="detail" resultType="com.kh.app.report.vo.ReportVo">
		SELECT
			REPORT_NO
			,MEMBER_NO
			,IMAGE_NO
			,TITLE
			,CONTENT
			,ENROLL_DATE
			,MODIFY_DATE
			,DEL_YN
		FROM 
			REPORT_BULLETIN_BOARD
		WHERE 
			DEL_YN = 'N'
	</select>
	
	<!--게시글 작성 -->
	<insert id="insert">
		INSERT INTO REPORT_BULLETIN_BOARD
		(
			REPORT_NO
			,MEMBER_NO
			,IMAGE_NO
			,TITLE
			,CONTENT
		) 
		VALUES
		(
			SEQ_REPORT_BULLETIN_BOARD_NO.NEXTVAL, 
			#{memberNo}
			,#{imageNo}
			,#{title}
			,#{content}
		)
	</insert>
	
	<!--게시글 수정 -->
	<update id="edit">
		UPDATE 
			REPORT_BULLETIN_BOARD
	    SET
	        IMAGE_NO = #{imageNo}
	        ,TITLE = #{title}
	        ,CONTENT = #{content}
	        ,MODIFY_DATE = #{modifyDate}
	    WHERE
	        REPORT_NO = #{reportNo}
	        AND DEL_YN = 'N'
	</update>
	
	<!--게시글 삭제 -->
	<update id="delete">
		UPDATE 
			REPORT_BULLETIN_BOARD
	    SET
	        DEL_YN = 'Y'
	    WHERE 
	    	REPORT_NO = #{reportNo}
	</update>
	
</mapper>